{% extends "base.html" %}
{% block title %}Checkout{% endblock %}

{% block content %}

<h2>Checkout</h2>

<ul class="list-group mb-4">
    {% for pid, item in cart.items %}
    <li class="list-group-item d-flex justify-content-between">
        {{ item.name }} × {{ item.qty }}
        <strong>₹{{ item.price|floatformat:2 }}</strong>
    </li>
    {% endfor %}
</ul>

<form method="post">
    {% csrf_token %}

    {% if addresses %}
    <h5>Select Address</h5>
    {% for address in addresses %}
    <div class="form-check">
        <input type="radio" name="address_id" value="{{ address.id }}" class="form-check-input">
        <label class="form-check-label">
            {{ address.label }} — {{ address.address_line }}
        </label>
    </div>
    {% endfor %}
    <p class="mt-3 text-muted">OR enter new address</p>
    {% endif %}

    <textarea name="address_line" class="form-control mb-2" placeholder="Address line"></textarea>
    <input name="city" class="form-control mb-2" placeholder="City">
    <input name="state" class="form-control mb-2" placeholder="State">
    <input name="pincode" class="form-control mb-3" placeholder="Pincode">

    <button type="submit" class="btn btn-dark">
        Place Order
    </button>
</form>

{% endblock %}
