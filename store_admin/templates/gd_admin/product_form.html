{% extends "gd_admin/base.html" %}
{% load static %}
{% block title %}{{ title }}{% endblock %}
{% block body_class %}dashboard-body{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row">

    {% include "gd_admin/sidebar.html" %}

    <main class="col-lg-10 main-content">

      <h1 class="page-title">{{ title }}</h1>

      <div class="glass-card">

        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="row g-4">

            <!-- CATEGORY -->
            <div class="col-md-6">
              <label class="form-label">Category</label>
              {{ form.category }}
            </div>

            <!-- NAME -->
            <div class="col-md-6">
              <label class="form-label">Product Name</label>
              {{ form.name }}
            </div>

            <!-- PRICE -->
            <div class="col-md-4">
              <label class="form-label">Price</label>
              {{ form.price }}
            </div>

            <!-- STOCK -->
            <div class="col-md-4">
              <label class="form-label">Stock</label>
              {{ form.stock }}
            </div>

            <!-- AVAILABLE -->
            <div class="col-md-4">
              <label class="form-label">Available</label>
              {{ form.available }}
            </div>

            <!-- IMAGE -->
            <div class="col-md-6">
              <label class="form-label">Product Image</label>
              {{ form.image }}
            </div>

            <!-- DESCRIPTION (AI INTEGRATED) -->
            <div class="col-12">
              <div class="d-flex align-items-center gap-2 mb-1">
                <label class="form-label mb-0">Description</label>

                <button
                  type="button"
                  id="ai-generate-product"
                  class="btn btn-sm btn-outline-gold"
                >
                 ✨ Generate with AI
                </button>
                <small class="text-muted d-block mt-1">
                  ⚙️ Using local AI (demo). Real AI integration coming soon.
                </small>


              </div>

              <small
                id="ai-error"
                class="text-danger"
                style="display:none;"
              ></small>

              {{ form.description }}

              <small class="text-muted">
                You can edit the AI-generated description before saving.
              </small>
            </div>

          </div>

          <!-- ACTIONS -->
          <div class="mt-4 d-flex gap-2">
            <button class="btn btn-gold" type="submit">
              <i class="bi bi-save me-2"></i> Save Product
            </button>

            <a href="{% url 'admin_products' %}" class="btn btn-outline-light">
              Cancel
            </a>
          </div>

        </form>

      </div>

    </main>
  </div>
</div>

<script src="{% static 'js/ai.js' %}"></script>

{% endblock %}